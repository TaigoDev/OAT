@page
@model ProjectNewsModel
@{
    ViewData["Title"] = "Новости проекта";
}

<link rel="stylesheet" href="~/css/allNews.css">
<script src="~/js/allNews.js" asp-append-version="true"></script>

<div class="container content-page">
    <section class="content">
        <h2 class="section-title">
            Новости проекта
        </h2>

        <div class="news-list">

            @foreach (var news in Model.news)
            {
                <div class="news-item">
                    <a class="news-item-img" href="~/news?id=@news.id">
                        <img src="@news.photos[0]" alt="">
                    </a>
                    <div class="news-item-content">
                        <div class="news-item-date">
                            @news.date
                        </div>
                        <div class="news-item-title">
                            @news.title
                        </div>
                        <div class="news-item-info">
                            @news.short_description
                            <a href="~/news?id=@news.id">
                                ещё...
                            </a>
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="pages-nav-container">
            <div class="pages-nav">

                @if (!string.IsNullOrWhiteSpace(HttpContext.Request.Query["id"].ToString()) && Convert.ToInt32(HttpContext.Request.Query["id"]) != 1)
                {
                    <a href="/AllNews?id=@(Convert.ToInt32(HttpContext.Request.Query["id"]) - 1)" class="pages-nav-arrow pages-nav-prev">
                        <img class="icon" src="~/images/basic/longArrow.svg" alt="назад">
                    </a>
                }

                <div class="pages-nav-pages-list">
                    @for (int i = 0; i < Model.pages; i++)
                    {
                        if (string.IsNullOrWhiteSpace(HttpContext.Request.Query["id"].ToString()) && i == 0)
                        {
                            <a href="~/AllNews?id=@(i + 1)" class="pages-nav-pages-list-item current">
                                @(i + 1)
                            </a>
                        }
                        else if (Convert.ToInt32(HttpContext.Request.Query["id"]) == i + 1)
                        {
                            <a href="~/AllNews?id=@(i + 1)" class="pages-nav-pages-list-item current">
                                @(i + 1)
                            </a>
                        }
                        else
                        {
                            <a href="~/AllNews?id=@(i + 1)" class="pages-nav-pages-list-item">
                                @(i + 1)
                            </a>
                        }
                    }
                </div>

                @if (string.IsNullOrWhiteSpace(HttpContext.Request.Query["id"].ToString()) && Model.pages > 1)
                {
                    <a href="/AllNews?id=2" class="pages-nav-arrow pages-nav-next">
                        <img class="icon" src="~/images/basic/longArrow.svg" alt="вперед">
                    </a>
                }
                else if (!string.IsNullOrWhiteSpace(HttpContext.Request.Query["id"].ToString()) &&
                Model.pages != Convert.ToInt32(HttpContext.Request.Query["id"]))
                {
                    <a href="/AllNews?id=@(Convert.ToInt32(HttpContext.Request.Query["id"]) + 1)" class="pages-nav-arrow pages-nav-next">
                        <img class="icon" src="~/images/basic/longArrow.svg" alt="вперед">
                    </a>
                }
            </div>
        </div>
        
    </section>
    <aside id="sidebar" class="sidebar">
        <h3 class="sidebar-title">
            Профессионалитет
        </h3>
        <nav class="sidebar-body">
            <ul class="sidebar-links">
                <li class="sidebar-link">
                    <a href='@Url.Page("About")'>
                        О профессионалитете
                    </a>
                </li>
                <li class="sidebar-link">
                    <a href='@Url.Page("Specialities")'>
                        Специальности
                    </a>
                </li>
                <li class="sidebar-link">
                    <a href='@Url.Page("Partners")'>
                        Партнеры
                    </a>
                </li>
                <li class="sidebar-link">
                    <a href='@Url.Page("ManagementCompany")'>
                        Управляющая компания
                    </a>
                </li>
                <li class="sidebar-link">
                    <a href='@Url.Page("RepairProgress")'>
                        Ход ремонтных работ
                    </a>
                </li>
                <li class="sidebar-link">
                    <a href='@Url.Page("/applicant/AdmissionRules")'>
                        Правила приема
                    </a>
                </li>
                <li class="sidebar-link sidebar-link-selected">
                    <a href='@Url.Page("ProjectNews")'>
                        Новости проекта
                    </a>
                </li>
            </ul>
        </nav>
    </aside>
</div>